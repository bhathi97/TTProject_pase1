CREATE DATABASE db_TTProject;

--LOGIN MASTER TABLE
CREATE TABLE tbl_LOGIN_MASTER(
	ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[NAME] VARCHAR(50) NOT NULL,
	[PASSWORD] VARCHAR(10) NOT NULL,
	USER_LEVEL VARCHAR(20) NOT NULL
);

--LOGIN MASTER LOGIN TABLE
CREATE TABLE tbl_LOGIN_LOG(
	ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[DATE] DATE NOT NULL,
	[TIME] TIME(0) NOT NULL,
	[STATUS] VARCHAR(10) NOT NULL,
	FID INT NOT NULL REFERENCES tbl_LOGIN_MASTER(ID) --who
);

--LOGIN HISTORY
CREATE TABLE tbl_LOGIN_HISTORY(
	ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[DATE] DATE NOT NULL,
	[EVENT] VARCHAR(10) NOT NULL,
	[TIME] TIME(0) NOT NULL,
	LOG_TYPE VARCHAR(10) NOT NULL,
	FID INT NOT NULL REFERENCES tbl_LOGIN_MASTER(ID) --who
);

--BENEFICIARY MASTER
CREATE TABLE tbl_BENEFICIARY_MASTER(
	NIC_NAME VARCHAR(20) NOT NULL PRIMARY KEY,
	[NAME] VARCHAR(50) NOT NULL,
	[ADDRESS] VARCHAR(100) NOT NULL,
	BANK_NAME VARCHAR(50) NOT NULL,
	BRANCH_NAME VARCHAR(50) NOT NULL,
	BRANCH_CODE VARCHAR(50),
	SWIFT_CODE VARCHAR(50) NOT NULL,
	COUNTRY VARCHAR(50) NOT NULL,
	ACC_NO VARCHAR(100) NOT NULL,
	INTERMEDIATE_BANK VARCHAR(50)
);

--BENEFICIARY HISTORY
CREATE TABLE tbl_BENEFICIARY_HISTORY(
	ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[EVENT] VARCHAR(10) NOT NULL,
	EDITOR INT REFERENCES tbl_LOGIN_MASTER(ID),
	[TIME] TIME(0) NOT NULL,
	[DATE] DATE NOT NULL,
	FID VARCHAR(20) NOT NULL REFERENCES tbl_BENEFICIARY_MASTER(NIC_NAME)
);

--FILE TABLE
CREATE TABLE tbl_FILE (
	ID INT IDENTITY(1,1) PRIMARY KEY,
	[NAME] VARCHAR(50) NOT NULL,
	[DATE_TIME] DATETIME NOT NULL,
	EDITOR INT REFERENCES tbl_LOGIN_MASTER(ID)
);

--TRANSACTION TABLE
CREATE TABLE tbl_TRANSACTION(
	ID INT IDENTITY(1,1) PRIMARY KEY,
	[NAME] VARCHAR(50) NOT NULL,
	DATE_TIME DATETIME NOT NULL,
	FID INT NOT NULL REFERENCES tbl_FILE(ID),
	EDITOR INT REFERENCES tbl_LOGIN_MASTER(ID)
);

--SENDER MASTER TABLE
CREATE TABLE tbl_SENDER_MASTER(
	ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[NAME] VARCHAR(50) NOT NULL,
	[ADDRESS] VARCHAR(100) NOT NULL,
	BUSINESS VARCHAR(50) NOT NULL,
	TAX VARCHAR(100) NOT NULL,
	TPNO VARCHAR(100) NOT NULL,
	TIN VARCHAR(50) NOT NULL
);

--SENDER HISTORY TABLE
CREATE TABLE tbl_SENDER_HISTORY(
	ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[DATE] DATE NOT NULL,
	[TIME] TIME(0) NOT NULL,
	EDITOR VARCHAR(50) NOT NULL,
	[EVENT] VARCHAR(50) NOT NULL,
	FID INT NOT NULL REFERENCES tbl_SENDER_MASTER(ID)
);

--SENDER EMAIL MASTER TABLE
CREATE TABLE tbl_EMAIL_MASTER(
	ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	EMAIL VARCHAR(50) NOT NULL,
	EPF VARCHAR(10) NOT NULL,
	FID INT NOT NULL REFERENCES tbl_SENDER_MASTER(ID)
);

--EMAIL HISTORY TABLE
CREATE TABLE tbl_EMAIL_HISTORY(
	ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	[EVENT] VARCHAR(20) NOT NULL,
	[DATE] DATE NOT NULL,
	[TIME] TIME(0) NOT NULL,
	EDITOR INT REFERENCES tbl_LOGIN_MASTER(ID),
	FID INT NOT NULL REFERENCES tbl_EMAIL_MASTER(ID)
);

--TRANSFER ---->
CREATE TABLE tbl_TRANSFER_ORDER_FORM(
	ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	FILE_REFERENCE VARCHAR(100) NOT NULL,
	DOCUMENT VARCHAR(100) NOT NULL,
	SENDER_ID INT NOT NULL,
	SENDER_NAME VARCHAR(100) NOT NULL,
	SENDER_ADDRESS VARCHAR(100) NOT NULL,
	SENDER_BUSINESS VARCHAR(100) NOT NULL,
	SENDER_TAX VARCHAR(100) NOT NULL,
	SENDER_VAT VARCHAR(100) NOT NULL,
	SENDER_TPNO VARCHAR(100) NOT NULL,
	SENDER_EMAIL1 VARCHAR(100),
	SENDER_EMAIL2 VARCHAR(100),
	PURPOSE VARCHAR(100) NOT NULL,
	INV VARCHAR(100) NOT NULL,
	[DESCRIPTION] VARCHAR(100) NOT NULL,
	TRADE_TERMS VARCHAR(100) NOT NULL,
	GOOD_STATE VARCHAR(100) NOT NULL,
	HS_CODES VARCHAR(100) NOT NULL,
	COURIER_NO VARCHAR(100) NOT NULL,
	BENEFICIARY_NIC_NAME VARCHAR(100) NOT NULL,
	BENEFICIARY_NAME VARCHAR(100) NOT NULL,
	BENEFICIARY_ADDRESS VARCHAR(100) NOT NULL,
	BENEFICIARY_BANK_NAME VARCHAR(100) NOT NULL,
	BENEFICIARY_BRANCH_NAME VARCHAR(100) NOT NULL,
	BENEFICIARY_BRANCH_CODE VARCHAR(100) NOT NULL,
	BENEFICIARY_SWIFT_CODE VARCHAR(100) NOT NULL,
	BENEFICIARY_COUNTRY VARCHAR(100) NOT NULL,
	BENEFICIARY_ACC_NO VARCHAR(100) NOT NULL,
	BENEFICIARY_INTERMEDIATE_BANK VARCHAR(100) NOT NULL,
	CURRENCY_TYPE VARCHAR(100) NOT NULL,
	AMOUNT DECIMAL(10,2) NOT NULL,
	AMOUNT_WORDS VARCHAR(100) NOT NULL,
	CHARGES VARCHAR(100) NOT NULL,
	ADD_EDITOR VARCHAR(100) NOT NULL,
	ADD_TIME DATETIME NOT NULL,
	ADD_EVENT VARCHAR(100) NOT NULL,
	ISCONFIRMED INT NOT NULL
);

CREATE TABLE tbl_TRANSFER_ORDER_FORM_CONFIRM(
	ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
	FID INT NOT NULL REFERENCES tbl_TRANSFER_ORDER_FORM(ID),
	CONFIRMED_EDITOR VARCHAR(50) NOT NULL,
	CONFIRMED_TIME DATETIME NOT NULL,
	ISPRINT VARCHAR(50) NOT NULL
);

