CREATE DATABASE db_TTProject

--LOGIN MASTER TABLE
create table tbl_LOGIN_MASTER(
	ID INT NOT NULL,
	[NAME] VARCHAR(50) NOT NULL,
	[PASSWORD] VARCHAR(10) NOT NULL,
	USER_LEVEL VARCHAR(20) NOT NULL,
	PRIMARY KEY (ID)
);

--LOGIN MASTER LOGIN TABLE
CREATE TABLE tbl_LOGIN_LOG(
	ID INT NOT NULL,
	[DATE] DATE NOT NULL,
	[TIME] TIME(0) NOT NULL,
	[STATUS] VARCHAR(10) NOT NULL,
	PRIMARY KEY (ID),
	FID INT NOT NULL REFERENCES tbl_LOGIN_MASTER(ID)
);

--LOGIN HISTORY
CREATE TABLE tbl_LOGIN_HISTORY(
	ID INT NOT NULL,
	[DATE] DATE NOT NULL,
	[EVENT] VARCHAR(10) NOT NULL,
	[TIME] TIME(0) NOT NULL,
	LOG_TYPE VARCHAR(10) NOT NULL,
	PRIMARY KEY (ID),
	FID INT NOT NULL REFERENCES tbl_LOGIN_MASTER(ID)
);

--BENIFICIARY MASTER
CREATE TABLE tbl_BENIFICIARY_MASTER(
	NIC_NAME VARCHAR(20) NOT NULL,
	[NAME] VARCHAR(50) NOT NULL,
	[ADDRESS] VARCHAR(50) NOT NULL,
	BANK_NAME VARCHAR(50) NOT NULL,
	BRANCH_NAME VARCHAR(50) NOT NULL,
	BRANCH_CODE VARCHAR(50),
	COUNTRY VARCHAR(50) NOT NULL,
	ACC_NO INT NOT NULL,
	INTERMEDIATE_BANK VARCHAR(50),
	PRIMARY KEY (NIC_NAME)

);

--BENIFICIARY HISTORY
CREATE TABLE tbl_BENIFICIARY_HISTORY(
	ID INT NOT NULL,
	[EVENT] VARCHAR(10) NOT NULL,
	BENIFICIARY_TYPE VARCHAR(50) NOT NULL,
	[TIME] TIME(0) NOT NULL,
	[DATE] DATE NOT NULL,
	PRIMARY KEY (ID),
	FID VARCHAR(20) NOT NULL REFERENCES tbl_BENIFICIARY_MASTER(NIC_NAME)
);

--FILE TABLE
CREATE TABLE tbl_FILE (
	ID INT IDENTITY(1,1) PRIMARY KEY,
	[NAME] VARCHAR(50) NOT NULL,
	[DATE_TIME] DATETIME NOT NULL
	--creator
);

--TRANSACTION TABLE
CREATE TABLE tbl_TRANSACTION(
	ID INT IDENTITY(1,1) PRIMARY KEY,
	[NAME] VARCHAR(50) NOT NULL,
	DATE_TIME DATETIME NOT NULL,
	FID INT NOT NULL REFERENCES tbl_FILE(ID)
	--creater
);


--SENDER EMAIL MASTER TABLE
CREATE TABLE tbl_EMAIL_MASTER(
	ID INT NOT NULL,
	EMAIL VARCHAR(50) NOT NULL,
	EPF VARCHAR(10) NOT NULL,
	PRIMARY KEY (ID)
);

--EMAIL HISTORY TABLE
CREATE TABLE tbl_EMAIL_HISTORY(
	ID INT NOT NULL,
	[EVENT] VARCHAR(20) NOT NULL,
	[DATE] DATE NOT NULL,
	[TIME] TIME(0) NOT NULL,
	EDITOR INT REFERENCES tbl_LOGIN_MASTER(ID),
	FID INT NOT NULL REFERENCES tbl_EMAIL_MASTER(ID)
);

--SENDER MASTER TABLE
CREATE TABLE tbl_SENDER_MASTER(
	ID INT NOT NULL,
	[NAME] VARCHAR(50) NOT NULL,
	[ADDRESS] VARCHAR(50) NOT NULL,
	BUSINESS VARCHAR(50) NOT NULL,
	TAX INT NOT NULL,
	TPNO VARCHAR NOT NULL
	PRIMARY KEY (ID),
	FID INT NOT NULL REFERENCES tbl_EMAIL_MASTER(ID)
);

--SENDER HISTORY TABLE
CREATE TABLE tbl_SENDER_HISTORY(
	ID INT NOT NULL,
	[DATE] DATE NOT NULL,
	[TIME] TIME(0) NOT NULL,
	EDITOR VARCHAR(50) NOT NULL,
	[EVENT] VARCHAR(50) NOT NULL,
	FID INT NOT NULL REFERENCES tbl_SENDER_MASTER(ID)
);